<script>
window.onload = function () {
 //Check the support for the File API support
 if (window.File && window.FileReader && window.FileList && window.Blob) {
    var fileSelected = document.getElementById('savefile');
    fileSelected.addEventListener('change', function (e) {
      //repeat every 1s to automatically update
      //window.setInterval(function() {
         //Get the file object
         var saveFile = fileSelected.files[0];
         //Initialize the FileReader object to read the saveFile
         var fileReader = new FileReader();
         fileReader.onload = function (e) {
             var emblemCounter = document.getElementById('emblemCounter');
             //matching hex code of 32 00 00 00 [01/02/03/04/05]{0-5 times}
             var matches = fileReader.result.match(/2\u0000\u0000\u0000[]+/g);
             //see what the emblem count according to the game is
             var emblems = parseInt(fileReader.result.match(/EMBLEM:\s*(\d+) Emblem/)[1]);
             //count emblems gained from end-of-story
             var storyEmblems = fileReader.result.match(/[\u0000]{16}(+)/);
             if(storyEmblems != null){
               storyEmblems = storyEmblems[0];
             }
             console.log(storyEmblems);
             console.log(parseInt(emblems));
             //use the game's emblem count if it exists (post-ESG)
             if(emblems = 0){
               emblemCounter.innerText = emblems;
               return;
             }
             //
             if(matches == null){
               emblemCounter.innerText = 0;
               return;
             }
             console.log(emblems[1]);
             console.log(matches);
             var ranks = {"A": 0, "B": 0, "C": 0, "D": 0, "E": 0};
             matches.forEach(function(m){
               ranks["A"] += (m.match(//g) || []).length;
               ranks["B"] += (m.match(//g) || []).length;
               ranks["C"] += (m.match(//g) || []).length;
               ranks["D"] += (m.match(//g) || []).length;
               ranks["E"] += (m.match(//g) || []).length;
             });
             for(var rank in ranks){
               emblems += ranks[rank];
             }
             emblems += (storyEmblems.match(//g) || []).length;
             emblemCounter.innerText = emblems;
             console.log(ranks);
         }
         //()+
         fileReader.readAsText(saveFile);
      //}, 1000);
    }, false);
}
 else {
     alert("Files are not supported");
 }
 }
</script>
<style type="text/css">
     body{
       background-color: #181818;
       color: white;
     }
     img{
       float: left;
       padding-left: 30px;
     }
     #emblemCounterText{
       float: left;
       padding-top: 5px;
     }
     #emblemCounter{
       float: left;
       padding-top: 3px;
       padding-left: 50px;
       font-size: 75px;
     }
     #oneeighty{
       float: left;
       padding-top: 3px;
       font-size: 75px;
     }
</style>
<body>
     Please Select Save File, usually in: C:\Program Files (x86)\Steam\steamapps\common\Sonic Adventure 2\resource\gd_PC\SAVEDATA</br>
      <input type="file" id="savefile" /></br></br></br></br>
    <div>
      <div id="emblemCounterText"><img src="emblemCounterText.png"></div>
      <div id="emblemCounter">0</div>
      <div id="oneeighty">/180</div>
      <img src="talonEmblem.png">
    </div>

</body>
